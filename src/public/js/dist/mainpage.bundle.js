!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=11)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return u}));var r="test",i="utf8",o="pubkey",u="privkey"},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return c}));var r=n(0),i=function(){sessionStorage.removeItem(r.d),sessionStorage.removeItem(r.c)},o=function(e,t,n){var r=new Blob([e],{type:n}),i=window.URL.createObjectURL(r);!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,document.body.appendChild(n),n.style="display: none",n.click(),n.remove()}(i,t),setTimeout((function(){return window.URL.revokeObjectURL(i)}),1e3)},u=function(e){document.querySelectorAll(e).forEach((function(e){e.style.display="none"}))},c=function(e){document.querySelectorAll(e).forEach((function(e){e.style.display=""}))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return c}));var r=n(0),i=n(1),o=function(e,t){return(e===r.d||e===r.c)&&((64===t.length||t instanceof Uint8Array)&&(sessionStorage.setItem(e,new Uint8Array(t).toString()),!0))},u=function(){var e=forge.pki.ed25519.generateKeyPair(),t=function(e){var t={publicKey:e.publicKey.toString(),privateKey:e.privateKey.toString()};return JSON.stringify(t)}(e);return Object(i.a)(t,"cryptoFs-keypair.json","application/json"),o(r.d,e.publicKey),o(r.c,e.privateKey),e},c=function(e){var t=JSON.parse(e);return t.publicKey=new Uint8Array(t.publicKey.split(",")),t.privateKey=new Uint8Array(t.privateKey.split(",")),t},a=function(){var e={publicKey:sessionStorage.pubkey,privateKey:sessionStorage.privkey};return e.publicKey||e.publicKey?(e.publicKey=new Uint8Array(e.publicKey.split(",")),e.privateKey=new Uint8Array(e.privateKey.split(",")),e):null},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.b,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a,n=a(),i=n.privateKey;return i?new Uint8Array(forge.pki.ed25519.sign({message:e,encoding:t,privateKey:i})):null},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a().publicKey,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(),o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r.b;document.querySelector("#".concat(e,' input[name="fileContentHash"]')).value=t,document.querySelector("#".concat(e,' input[name="msg"]')).value=o,document.querySelector("#".concat(e,' input[name="signature"]')).value=i.toString(),document.querySelector("#".concat(e,' input[name="publicKey"]')).value=n.toString()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));var r=n(1),i=function(e){document.querySelector("#navSuccessMessage").innerHTML=e,Object(r.d)("#navSuccess")},o=function(e){document.querySelector("#navFailureMessage").innerHTML=e,Object(r.d)("#navFailure")}},,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(3),o=function(){var e=document.querySelector("#uploadFile").files[0];if(e){var t=new FileReader;t.onload=function(){var n=t.result,o=Object(r.c)();if(o){var u=forge.util.createBuffer(o.privateKey.slice(0,16)),c=forge.util.createBuffer(o.privateKey.slice(16,33)),a=forge.cipher.createCipher("AES-CBC",u);a.start({iv:c}),a.update(forge.util.createBuffer(n)),a.finish(),n=a.output.getBytes();var l=forge.md.sha1.create();l.update(forge.util.encodeUtf8(n));var d=l.digest().toHex();Object(r.f)("fileUpload",d);var f=document.getElementById("fileUpload"),s=new FormData(f);s.delete("uploadFile"),s.append("uploadFile",new Blob([n]),e.name),fetch(f.getAttribute("action"),{method:f.getAttribute("method"),headers:{Accept:"application/json"},body:s}).then((function(e){return e.json().then((function(e){e.success?(Object(i.b)(e.message),document.querySelector("#uploadFile").value="",document.querySelector("#uploadFileDiv .file-name").textContent="File uploaded"):Object(i.a)(e.message)}))})).catch((function(e){return Object(i.a)(e)}))}else Object(i.a)("Please login to upload file")},t.readAsBinaryString(e)}else Object(i.a)("File not selected")},u=function(e){return e.preventDefault(),document.querySelectorAll("#recaptcha").length?grecaptcha.execute():o(),!1};document.addEventListener("DOMContentLoaded",(function(){document.querySelector("#fileUpload").addEventListener("submit",u),window.submitForm=o;var e=document.querySelector("#uploadFileDiv input[type=file]");e.addEventListener("change",(function(){e.files.length>0&&(document.querySelector("#uploadFileDiv .file-name").textContent=e.files[0].name)}))}))}]);